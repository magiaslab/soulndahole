---
import { Image } from 'astro:assets';
import logo from '../assets/images/logo.svg';
---
<header id="main-header" class="fixed w-full z-50 py-4 transition-all duration-300">
  <div class="container mx-auto px-4 relative flex items-center justify-between">
    <div class="logo-container">
      <a href="/" class="block">
        <Image 
          src={logo}
          alt="SoulNDahole Logo" 
          class="h-8 md:h-12 w-auto logo-image"
          width="150"
        />
      </a>
    </div>
    <div class="hidden md:flex space-x-8">
      <a href="/" class="nav-link text-white">Home</a>
      <a href="/#programma" class="nav-link text-white">Programma</a>
      <a href="/teams" class="nav-link text-white">Squadre</a>
      <a href="/albo-doro" class="nav-link text-white">Albo d'oro</a>
      <a href="/#sponsor" class="nav-link text-white">Sponsor</a>
      <a href="/#trovaci" class="nav-link text-white">Trovaci</a>
    </div>
    <button id="mobile-menu-button" class="md:hidden text-white z-50">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>
</header>
<div id="header-spacer" style="height:0;"></div>

<!-- Mobile Nav -->
<nav id="mobile-nav" class="mobile-nav-hidden">
  <a href="/" class="nav-link text-white text-3xl font-bold">Home</a>
  <a href="/#programma" class="nav-link text-white text-3xl font-bold">Programma</a>
  <a href="/teams" class="nav-link text-white text-3xl font-bold">Squadre</a>
  <a href="/albo-doro" class="nav-link text-white text-3xl font-bold">Albo d'oro</a>
  <a href="/#sponsor" class="nav-link text-white text-3xl font-bold">Sponsor</a>
  <a href="/#trovaci" class="nav-link text-white text-3xl font-bold">Trovaci</a>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileNav = document.getElementById('mobile-nav');

    if (mobileMenuButton && mobileNav) {
      mobileMenuButton.addEventListener('click', () => {
        mobileNav.classList.toggle('mobile-nav-hidden');
        mobileNav.classList.toggle('mobile-nav-visible');
      });
    }

    const navLinks = mobileNav.querySelectorAll('a');
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileNav.classList.add('mobile-nav-hidden');
        mobileNav.classList.remove('mobile-nav-visible');
      });
    });
  });
</script>

<style>
  /* Header sempre fixed */
  #main-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    transition: background-color 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease;
  }
  
  /* Stato sticky: sfondo nero, testo bianco */
  #main-header.sticky {
    background-color: rgba(17, 24, 39, 0.85); /* bg-gray-900 con opacità */
    box-shadow: 0 4px 24px -4px rgba(0,0,0,0.2);
    backdrop-filter: blur(8px);
  }

  /* I link e il bottone del menu sono già text-white di default.
     Non serve cambiarli quando .sticky viene aggiunto se lo sfondo è scuro.
     Se lo sfondo sticky fosse chiaro, qui cambieremmo il colore del testo in scuro.
  */
  /* 
  #main-header.sticky .nav-link,
  #main-header.sticky button {
    color: #FFFFFF; 
  }
  */

  .nav-link {
    position: relative;
    transition: color 0.3s ease; /* Transizione colore per hover */
  }
  .nav-link:hover {
    color: #6366f1; /* Esempio: indigo-500 su hover */
  }
  .nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px;
    left: 0;
    background-color: #6366f1; /* Indigo-500 */
    transition: width 0.3s ease;
  }
  .nav-link:hover::after {
    width: 100%;
  }
  .logo-image {
    filter: drop-shadow(0 0 0 rgba(79, 70, 229, 0));
    transition: all 0.3s ease;
  }
  .logo-image:hover {
    filter: drop-shadow(0 0 8px rgba(79, 70, 229, 0.5));
    transform: scale(1.05);
  }
  .mobile-nav-hidden {
    display: none;
  }
  .mobile-nav-visible {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    z-index: 40;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
  }
</style> 