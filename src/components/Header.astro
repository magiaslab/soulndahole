---
import { Image } from 'astro:assets';
import logo from '../assets/images/logo.svg';

const navLinks = [
    { name: "Home", href: "/" },
    { name: "Programma", href: "/programma" },
    { name: "Squadre", href: "/teams" },
    { name: "Albo d'oro", href: "/albo-doro" },
    { name: "Sponsor", href: "/sponsor" },
    { name: "Trovaci", href: "/trovaci" }
];
---
<header id="main-header" class="fixed top-0 left-0 w-full z-50 transition-all duration-300">
  <div class="container mx-auto px-4 relative flex items-center justify-between">
    <div class="logo-container">
      <a href="/" class="block">
        <Image 
          src={logo}
          alt="SoulNDahole Logo" 
          class="h-8 md:h-12 w-auto logo-image"
          width="150"
        />
      </a>
    </div>
    <div class="hidden md:flex items-center space-x-2">
        {navLinks.map(link => (
            <a href={link.href} class="px-4 py-2 text-sm font-medium text-white hover:text-soul-red-500 transition-colors duration-300 uppercase tracking-wider">{link.name}</a>
        ))}
    </div>
    <button id="mobile-menu-button" class="md:hidden text-white z-50 relative h-6 w-6">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 icon-open" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 icon-close" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
</header>
<div id="header-spacer" style="height:0;"></div>

<!-- Mobile Nav -->
<nav id="mobile-nav">
    <div id="mobile-menu" class="md:hidden absolute top-full left-0 w-full bg-black/90 backdrop-blur-sm transition-transform duration-300 ease-in-out transform -translate-x-full">
        <div class="flex flex-col items-center py-8 space-y-4">
             {navLinks.map(link => (
                <a href={link.href} class="block px-4 py-2 text-lg font-bold text-white hover:text-soul-red-500 transition-colors duration-300 uppercase tracking-wider">{link.name}</a>
            ))}
        </div>
    </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileNav = document.getElementById('mobile-nav');

    if (mobileMenuButton && mobileNav) {
      mobileMenuButton.addEventListener('click', () => {
        const isOpen = mobileNav.classList.toggle('is-open');
        mobileMenuButton.classList.toggle('is-open');
        document.body.classList.toggle('mobile-nav-is-open', isOpen);
      });

      const navLinks = mobileNav.querySelectorAll('a');
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          mobileNav.classList.remove('is-open');
          mobileMenuButton.classList.remove('is-open');
          document.body.classList.remove('mobile-nav-is-open');
        });
      });
    }
  });
</script>

<style>
  /* Header sempre fixed */
  #main-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    transition: background-color 0.3s ease, box-shadow 0.3s ease, backdrop-filter 0.3s ease;
  }
  
  /* Stato sticky: sfondo nero, testo bianco */
  #main-header.sticky {
    background-color: rgba(17, 24, 39, 0.85); /* bg-gray-900 con opacità */
    box-shadow: 0 4px 24px -4px rgba(0,0,0,0.2);
    backdrop-filter: blur(8px);
  }

  /* I link e il bottone del menu sono già text-white di default.
     Non serve cambiarli quando .sticky viene aggiunto se lo sfondo è scuro.
     Se lo sfondo sticky fosse chiaro, qui cambieremmo il colore del testo in scuro.
  */
  /* 
  #main-header.sticky .nav-link,
  #main-header.sticky button {
    color: #FFFFFF; 
  }
  */

  .nav-link {
    position: relative;
    transition: color 0.3s ease; /* Transizione colore per hover */
  }
  .nav-link:hover {
    color: #ef4444; /* soul-red-500 */
  }
  .nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px;
    left: 0;
    background-color: #ef4444; /* soul-red-500 */
    transition: width 0.3s ease;
  }
  .nav-link:hover::after {
    width: 100%;
  }
  .logo-image {
    filter: drop-shadow(0 0 0 rgba(239, 68, 68, 0));
    transition: all 0.3s ease;
  }
  .logo-image:hover {
    filter: drop-shadow(0 0 8px rgba(239, 68, 68, 0.5));
    transform: scale(1.05);
  }

  /* Nuovi stili per il menu mobile */
  #mobile-nav {
    position: fixed;
    top: 0;
    right: 0;
    width: 100%;
    height: 100%;
    background: rgba(10, 10, 10, 0.95);
    backdrop-filter: blur(8px);
    z-index: 40;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    transform: translateX(100%);
    transition: transform 0.35s cubic-bezier(0.22, 1, 0.36, 1), visibility 0.35s;
    visibility: hidden;
  }

  #mobile-nav.is-open {
    transform: translateX(0);
    visibility: visible;
  }
  
  #mobile-menu-button .icon-open,
  #mobile-menu-button .icon-close {
    transition: opacity 0.2s ease, transform 0.3s ease;
  }

  #mobile-menu-button .icon-close {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    transform: rotate(-90deg) scale(0.8);
  }

  #mobile-menu-button.is-open .icon-open {
    opacity: 0;
    transform: rotate(90deg) scale(0.8);
  }

  #mobile-menu-button.is-open .icon-close {
    opacity: 1;
    transform: rotate(0) scale(1);
  }

  body.mobile-nav-is-open {
    overflow: hidden;
  }
</style> 